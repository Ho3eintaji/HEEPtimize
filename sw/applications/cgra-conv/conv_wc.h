
#ifndef _CONV_CGRA_WC_H_
#define _CONV_CGRA_WC_H_


#include <stdint.h>
#include <stdint.h>
#include "kernels_common/kernels_common.h"
#include "data.h"

#define IN_VAR_DEPTH_WC    6
#define OUT_VAR_DEPTH_WC   1

static void        config_wc  ();

const uint32_t cgra_imem_conv_wc[CGRA_IMEM_SIZE] = {0xa90000, 0xab0000, 0x6bf0000, 0x971d0000, 0x0, 0x0, 0x0, 0x500f0000, 0x971d0000, 0x0, 0x500f0000, 0x0, 0x500f0000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xc80000, 0xc80000, 0xa90000, 0xab0000, 0x6bf0000, 0x971d0000, 0x0, 0x0, 0x0, 0x500f0000, 0x971d0000, 0x0, 0x500f0000, 0x0, 0x500f0000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xa90000, 0xab0000, 0x6bf0000, 0x971d0000, 0x820d0000, 0x820d0000, 0x0, 0x500f0000, 0x971d0000, 0x0, 0x500f0000, 0x0, 0x500f0000, 0x0, 0x820d0000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x300d0000, 0x300d0000, 0x820d0000, 0x850d0000, 0x5080000e, 0x820d0000, 0x0, 0x0, 0x0, 0x0, 0x300d0000, 0x820d0000, 0x850d0000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xa90000, 0xab0000, 0x6bf0000, 0x971d0000, 0x0, 0x0, 0x90080000, 0x500f0000, 0x971d0000, 0x90080000, 0x500f0000, 0x90080000, 0x500f0000, 0x90080000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xa90000, 0xab0000, 0x6bf0000, 0x971d0000, 0x0, 0x0, 0x90080000, 0x500f0000, 0x971d0000, 0x90080000, 0x500f0000, 0x90080000, 0x500f0000, 0x90080000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xa90000, 0xab0000, 0x6bf0000, 0x971d0000, 0x820d0000, 0x820d0000, 0x90080000, 0x500f0000, 0x971d0000, 0x90080000, 0x500f0000, 0x90080000, 0x500f0000, 0x90080000, 0x820d0000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xa00900c4, 0x6a110001, 0x300d0000, 0x300d0000, 0x820d0000, 0x6a110001, 0x60880005, 0x820d0000, 0x0, 0x0, 0x0, 0x0, 0x300d0000, 0x820d0000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xab0000, 0x5bf0000, 0x971d0000, 0x0, 0x0, 0x90080000, 0x5bf0000, 0x971d0000, 0x90080000, 0x5bf0000, 0x90080000, 0x5bf0000, 0x90080000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xab0000, 0x5bf0000, 0x971d0000, 0x0, 0x0, 0x90080000, 0x5bf0000, 0x971d0000, 0x90080000, 0x5bf0000, 0x90080000, 0x5bf0000, 0x90080000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xab0000, 0x5bf0000, 0x971d0000, 0x820d0000, 0x820d0000, 0x90080000, 0x5bf0000, 0x971d0000, 0x90080000, 0x5bf0000, 0x90080000, 0x5bf0000, 0x90080000, 0x820d0000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xa009000d, 0x0, 0x300d0000, 0x300d0000, 0x820d0000, 0x6a110001, 0x60080000, 0x820d0000, 0x0, 0x0, 0xa009000e, 0x80080000, 0x300d0000, 0x820d0000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xa90000, 0x60080000, 0x2a0b0000, 0x0, 0x7b80000, 0x7b80000, 0x6a090004, 0x7a0b0004, 0x0, 0x6a090004, 0x0, 0x6a090004, 0x0, 0x6a090004, 0x0, 0x0, 0x0, 0x3bf0000, 0x29080000, 0x0, 0x0, 0xa90000, 0x60080000, 0x0, 0x20080000, 0x0, 0x0, 0x6a090004, 0x0, 0x2a100004, 0x6a090004, 0x0, 0x6a090004, 0x0, 0x6a090004, 0x0, 0x1a0b0004, 0x0, 0x0, 0x0, 0x27c00000, 0x0, 0xa90000, 0x60080000, 0x0, 0xa0b0000, 0x70800006, 0x32c00000, 0x6a090004, 0x0, 0x0, 0x6a090004, 0x0, 0x6a090004, 0x90080000, 0x6a090004, 0x32c00000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xab0000, 0x0, 0x0, 0x0, 0x40800009, 0x300d0000, 0x840d0000, 0x850d0000, 0x300d0000, 0x0, 0x0, 0x0, 0x20800007, 0x0, 0x0, 0x40d0000, 0x850d0000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0};
const uint32_t cgra_kmem_conv_wc[CGRA_KMEM_SIZE] = {0x0, 0xf014, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0};

static int32_t cgra_input_wc[CGRA_N_COLS][IN_VAR_DEPTH_WC]     __attribute__ ((aligned (4)));
static int32_t cgra_output_wc[CGRA_N_COLS][OUT_VAR_DEPTH_WC]   __attribute__ ((aligned (4)));

kcom_kernel_t conv_wc_kernel = {
    .kmem   = cgra_kmem_conv_wc,
    .imem   = cgra_imem_conv_wc,
    .col_n  = CGRA_N_COLS,
    .in_n   = IN_VAR_DEPTH_WC,
    .out_n  = OUT_VAR_DEPTH_WC,
    .input  = cgra_input_wc,
    .output = cgra_output_wc,
    .config = config_wc,
    .name   = "conv_wc",
};

void config_wc()
{

    int input_channel = 0;
    int output_channel = 0;

    for(int16_t i = 0; i < 3; i++) {
        cgra_input_wc[0][i] =   &(input[0][input_channel][0][i]);
        cgra_input_wc[1][i] =   &(input[0][input_channel][1][i]);
        cgra_input_wc[2][i] =   &(input[0][input_channel][2][i]);

    }

    cgra_input_wc[3][0]= &CGRA_output[output_channel];

    for(int16_t i = 3; i < 6; i++){
        cgra_input_wc[0][i] = filter[output_channel][input_channel][0][i-3];
        cgra_input_wc[1][i] = filter[output_channel][input_channel][1][i-3];
        cgra_input_wc[2][i] = filter[output_channel][input_channel][2][i-3];
    }
}

#endif // _CONV_CGRA_WC_H_